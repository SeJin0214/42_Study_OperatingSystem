# 막간: 메모리 관리 API

## 메모리 공간의 종류

stack : 할당과 반환아 컴파일러에 의해 암묵적으로 이루어진다. -> 자동 메모리라고도 불림  
변수를 선언하기 하면 컴파일러가 자동으로 할당 받음 하지만 함수가 리턴되면 자동으로 메모리를 반환함  
즉 함수가 리턴된 다음에도 기억되어야 하는 정보는 stack에 저장하지 않는게 좋다.  

heap : 프로그래머가 동적으로 할당받는 정보가 저장되는 공간 많은 에러의 원인이다.  

## malloc 함수

메모리를 동적할당 받는 함수!  
주의점 sizeof : 컴파일 시간 연산자이다.  
평소에는 연산자로 사용가능 하지만 int즉 32비트 64비트 에서 값이 달리지는경우 sizeof는 동적으로 할당  
받은 매모리의 크기가 얼마인지가 아니라, 정수를 가르키는 포인터의 크기가 얼마인지 물어본다고 생각 하기  
때문에 원하는 결과를 얻지 못할 수 있다.  
타입 변환(캐스팅)은 프로그래머가 정확한 타입을 확인한 정도이지 제대로 동작하는 데 있어서 반드시 필요한  
것은 아니다.  

## free 함수
메모리를 해제해주는 함수  
할당된 메모리크기는 할당 라이브러리가 알아야한다. -> 우리는 free만 해준면 된다!!!  

## 흔한 오류

### 메모리 할당 잊어버리기

메모리가 할당이 안되었는데, 메모리를 사용하려고 하는경우 세그먼트 에러가 난다.  
책에서는 "네가 메모리 관련 무언가를 잘못했어, 이 바보 같은 프로그래머야! 그래서 화났당!!"  
즉 우리는 메모리를 할당해서 정보를 할당하자 화내게 하지 말자  

### 메모리를 부족하게 할당 받기
버퍼 오버플로우의 원인이다. 문제가 없는 것 처럼 보일 수 있지만, 보안의 취약점이되고, 고장을 일으키고  
크래시가 된다. 프로그램이 실행된다고 해도 문제가 없는건 아니다.  
### 할당받은 메모리 초기화하지 않기

초기화되지 않은 영역 읽기는 메모리를 할당받고 초기화 하지 않으면 나오는에러이다.  
우리가 원하는 결과를 얻으려면 초기화를 하자 초기화 하지 않은 메모리는 운이 좋으면 에러가 없지만  
만약 이상한 결과값이 들어 있다면 프로그램은 터지게 된다.  

### 메모리 해제하지 않기
### 메모리 사용이 끝나기 전에 메모리 해제하기
### 반복적으로 메모리 해제하기
### free() 잘못 호출하기


## 운영체제의 지원

## 기타 함수들