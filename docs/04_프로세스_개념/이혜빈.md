# 7. 프로세스의 개념

> 프로세스 = 실행 중인 프로그램  
> cpu가상화 : cpu가 여러 개 존재한다는 환상

## 7.1 프로세스의 개념
프로세스는 실행 중인 프로그램.  
프로세스를 간단하게 알기 위해서는 접근했거나, 영향을 받은 자원의 목룍을 알아야 함.  
이 떄 자원들에서 가장 중요한 자원은 __메모리__, __레지스터__.
- 메모리 : adddress space. 명령어가 접근하는 공간, 실행 프로그램이 읽고 쓰는 데이터도 저장되어 있음.
- 레지스터 : 많은 명렁어들이 레지스터를 직접 읽거나 갱신함. 특히 PC(program counter)은 프로그램의 어느 명령어가 실행 중인지를 알려줌.

	### Policy & Mechanism  
    policy - which  
	Mechanism - how

## 7.2 프로세스 API
> API란?  
소프트웨어 프로그램이 다른 소프트웨어 프로그램으로 데이터를 전송할 수 있도록 하는 규칙 집합

운영체제가 반드시 API로 제공해야 하는 기능  
- Create : 운영체제는 새로운 프로세스를 생성할 수 있는 방법을 제공해야 한다. (ex. `fork()`)
- Destroy : 운영체제는 프로세스를 강제로 제거할 수 있는 인터페이스를 제공해야 한다. (ex. `exit()`)
- Wait
- Status : 프로세스 상태 정보 제공
- 각종 제어

## 7.3 프로세스 생성 : 좀 더 자세하게

> 프로그램이 어떻게 프로세스로 변형되는가?

프로그램 실행을 위해 운영체제가 해야할 일  

1. 디스크(or SSD)에 존재하는 프로그램의 __코드와 데이터__ 를 메모리(프로세스 주소 공간)에 탑재하기
2. 프로세스 실행 전, 일정량의 메모리 할당 및 초기화 하기
   - 스택 - 지역 변수, 함수 인자, 리턴 주소
   - 힙 - 동적할당
3. 입출력 관련 초기화 작업
   - file descriptor : STDIN, STDOUT, STDERR

여기까지 했다면 `main()`에서 프로그램 실행을 시작하는 마지막 작업만 남음.

## 프로세스 상태(State)

- 실행(Running) : 프로세스는 명령어 실행 중
- 준비(Ready) : 프로세스는 실행할 준비 O but 대기 중
- 대기(Blocked) : 프로세스 실행할 준비 X (ex. 입출력 요청)

> __Process Control Block, PCB__ : 프로세스 제어 블럭, 프로세스의 관리를 위한 정보를 저장하는 자료구조

## 7.5 자료 구조
운영체제도 일종의 프로그램이므로 다양한 정보를 유지하기 위한 자료 구조를 가지고 있음.

- process list : 프로세스 상태를 파악하기 위해 준비 상태의 프로세스들을 저장해 둠.
- register context : 프로세스가 중단 되었을 대 해당 프로세스의 레지스터 값들 저장. 이후 이 레지스터 값을 복원하여 운영체제가 프로세스 실행을 재개함(context switch 기법)
  
</br>

# 요약

프로세스 == 실행 중인 프로그램