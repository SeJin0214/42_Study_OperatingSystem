<aside>
💡 API(System call)를 어떻게 사용할지 다룬다.

코드는 pdf를 참고할 것 

</aside>

## fork()

<aside>
👉 프로세스를 생성할 때 사용한다.

</aside>

- 생성된 프로세스는 부모 프로세스의 복사본이다.
- 자식 프로세스는 fork가 호출된 그 이후부터 코드를 실행한다.
- fork의 return 값부터 분기점이 다르다.
    - 부모 프로세스가 받는 fork의 return 값 → 자식 프로세스 PID
    - 자식 프로세스가 받는 fork의 return 값 → 0
    - 부모와 자식 프로세스가 서로 다른 코드를 실행하기 편함

![fork이후.jpg](docs\05_프로세스_API\fork이후.jpg.png)

- fork 이후 무엇부터 실행할까?
    - CPU 스케줄러가 선택한다.
    - 상황에 따라 다르기 때문에 단정 지을 수 없다. 비결정성(nondeterminism)

## wait()

자신이 생성한 자식 프로세스가 종료되기를 기다리기 원할 때 사용된다.

## exec()

내 프로세스에서 다른 프로그램을 실행해야 할 때 사용한다.

보통 fork()로 만든 자식 프로그램에서 exec() 함수를 실행한다. 

**해당 실행 파일의 코드와 정적 데이터를 읽어** 들여 **현재 실행 중인 프로세스의 코드 영역과 정적 데이터 부분을 덮어** 쓴다

## 왜 이런 API를?

쉘이 fork()를 호출하고 exec()를 호출하기 전에 코드를 실행할 수 있다. 이때 실행하는 코드에서 프로그램의 환경을 설정하고, 다양한 기능을 준비 할 수 있음 → pipex 

리디렉션 만드는 방법 dup2를 뒤에 파일에 보내면 된다. 

숙제 (minishell 에서 해보기)