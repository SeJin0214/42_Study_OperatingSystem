# 11 Multi-level Feedback Queue (MLFQ)

> MLFQ가 해결하고자하는 문제 두가지
>> 1. 짧은 작업을 먼저 실행하여 반환시간을 최적화
>> 2. 사용자에게 빠른 응답을 주기 위해 응답시간을 최적화  
> 그렇다면 프로세스에 대한 정보 없이 최적화 스케줄링을 할 수 있는 방법은?

## 11.1 기본 규칙(알고리즘)
1. 우선순위(A) > 우선순위(B) -> A 실행, B 실행 x
2. 우선순위(A) = 우선순위(B) -> A와 B는 RR 방식으로 실행 
3. 작업이 시스템이 들어가면 최상위 큐에 배치
4. 작업이 배정받은 TS내에 작업을 완료하지 못하면 우선순위는 내려간다.
5. 일정주기가 지나면 시스템의 모든 작업을 최상위 큐로 이동한다.

이런 규칙들 덕분에 MLFQ는 작업을 길이를 미리 알 수 없어도 SJF와 비슷하게 동작할 수 있다.  
또한 4번 규칙으로 입출력 작업이 많은 프로세스에 대해서 더 많은 우선순위를 부여할 수 있기 때문에 응답시간도 줄이고,  
하나의 작업이 너무 자원을 독점하는 것을 막을 수 있다.

다만 이 방식을 악용하여 TS직전에 CPU를 양보하는 방식으로 높은 우선순위를 유지하는 프로세스가 있을 수 있다.  
이에 CPU 총 사용 시간을 측정하여 5번 규칙을 적용하면서 한 프로세스가 CPU를 독점하는 일을 막을 수 있다.

MLFQ는 ㄱRT과 RR모두를 최적화 하지만 TS의 길이, 필요한 큐의 개수와 같은 세부적인 규칙에 대해 신중하게 설정해야 하는 문제점도 있다.  
이에 대해서는 수학자들이 잘 계산함 ㅇㅇ

CPU를 공정하고, 효율적으로 사용하기 위해 현재 대부분의 OS에서는 MLFQ를 기본 스케줄러로 사용한다.